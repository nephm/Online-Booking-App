<!DOCTYPE html>
    <html lang="en" xmlns:th="http://www.thymeleaf.org">
    <head>
        <meta charset="UTF-8">
        <title>Badminton Court Booking</title>
        <link rel="stylesheet" th:href="@{/css/styles.css}">
        <link th:href="@{/court.css}" rel="stylesheet">
        <script src="/js/script.js" defer></script>
    </head>
    <body>
    <div class="dashboard-container">
        <header class="header">
            <nav class="nav">
                <div class="logo">CourtBooker</div>
                <div class="nav-links">
                    <a href="/venues" class="nav-link">Venues</a>
                    <a href="about.html" class="nav-link">About</a>
                    <a href="contacts.html" class="nav-link">Contacts</a>

                    <div class="profile">
                        <button class="profile-btn">
                            <img src="images/userProfile_logo.jpg" alt="User icon" class="icon">
                            <span class="username">Hi, </span>
                        </button>
                        
                        <div class="dropdown">
                            <a href="profile.html">My Profile</a>
                            <a href="/venues">My Bookings</a>
                            <a href="settings.html">Settings</a>
                            <a href="/logout">Logout</a>
                        </div>
                    </div>
                </div>
            </nav>
        </header>

        <h1 class="venues-title">BADMINTON COURT BOOKING</h1>

        <form method="get" th:action="@{/venue/__${venue.venueId}__/courts}">
            <label for="date">Select Date:</label>
            <select id="date" name="date" onchange="this.form.submit()">
                <option th:each="day : ${#numbers.sequence(1,30)}"
                        th:value="${'2025-09-' + (day < 10 ? '0' + day : day)}"
                        th:text="${'Sep ' + day}"
                        th:selected="${selectedDate == T(java.time.LocalDate).parse('2025-09-' + (day < 10 ? '0' + day : day))}">
                </option>
            </select>
        </form>

        <!-- Booking table -->
        <form th:action="@{/book}" method="post">
            <table id="bookingTable">
                <thead>
                    <tr>
                        <th>Court</th>
                        <th th:each="slot : ${headerSlots}" th:text="${slot}"></th>
                    </tr>
                </thead>
                <tbody>
                    <tr th:each="court : ${courts}">
                        <td class="court-label" th:text="${court.court_name}"></td>

                        <td th:each="slot : ${timeSlots}">
                            <input type="checkbox"
                                name="selectedSlots"
                                th:value="${court.court_id + '-' + slot.timeslot_id + '-' + selectedDate}"
                                th:disabled="${availability[court.court_id + '-' + slot.timeslot_id]} == false" 
                                class="timeslot-box"/>
                        </td>
                    </tr>
                </tbody>
            </table>

            <div style="margin-top: 20px; text-align: center;">
                <button type="submit" class="proceed-btn">Proceed to Book</button>
            </div>
        </form>
    </div>
    </body>
</html>